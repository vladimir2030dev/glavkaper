var timer,timeOut_Val=300,timeOut=timeOut_Val,preview_shortcode=jQuery(".wpsisac-customizer").attr("data-shortcode"),dep_wrap=".wpsisac-customizer-control",dependency=jQuery(dep_wrap+" .wpsisac-cust-dependency").attr("data-dependency");function wpsisac_generate_shortcode_preview(){var r="",e=jQuery(".wpsisac-customizer"),s=jQuery(".wpsisac-customizer-control"),i=preview_shortcode;clearTimeout(timer),timer=setTimeout(function(){e.find(".wpsisac-customizer-loader").fadeIn(),r+="["+i,s.find('input[type="text"], input[type="checkbox"]:checked, input[type="radio"], input[type="number"], textarea, select').each(function(e,s){if(!jQuery(this).hasClass("wpsisac-cust-hidden-field")){var i=jQuery(this).val(),t=jQuery(this).attr("name"),c=jQuery(this).attr("data-default"),a=jQuery(this).attr("data-empty");void 0===i||""==i&&!a||i==c||(r+=" "+t+'="'+i+'"')}}),r+="]",e.find(".wpsisac-customizer-shrt").val(r),jQuery("#wpsisac-customizer-shrt-form").submit(),e.find(".wpsisac-customizer-preview-frame").load(function(){e.find(".wpsisac-customizer-loader").fadeOut()})},timeOut)}function wpsisac_check_ref_dependency(i){if(ref_dep=i in dependency,ref_dep){var t=jQuery(dep_wrap+" .wpsisac-"+i).val();jQuery.each(dependency[i].show,function(e,s){jQuery(dep_wrap+" .wpsisac-"+e).closest(".wpsisac-customizer-row").hide(),jQuery(dep_wrap+" .wpsisac-"+e).addClass("wpsisac-cust-hidden-field"),-1!==jQuery.inArray(t,s)&&jQuery(dep_wrap+" .wpsisac-"+i).is(":visible")&&(jQuery(dep_wrap+" .wpsisac-"+e).closest(".wpsisac-customizer-row").show(),jQuery(dep_wrap+" .wpsisac-"+e).removeClass("wpsisac-cust-hidden-field")),wpsisac_check_ref_dependency(e)})}}dependency=jQuery.parseJSON(dependency),jQuery(document).ready(function(a){a(document).on("click",".wpsisac-cust-dwp",function(){a("body").toggleClass("wpsisac-cust-full-preview"),a(this).toggleClass("wpsisac-cust-dwp-active")}),a("#wpsisac-cust-accordion").accordion({collapsible:!0,heightStyle:"content",icons:{header:"dashicons dashicons-arrow-down-alt2",activeHeader:"dashicons dashicons-arrow-up-alt2"}}),a(document).on("change",'.wpsisac-customizer-control select, .wpsisac-customizer-control input[type="number"]',function(){field_timeout=a(this).attr("data-timeout"),timeOut="undefined"!=typeof field_timeout?field_timeout:timeOut_Val,wpsisac_generate_shortcode_preview()}),a(document).on("keyup",'.wpsisac-customizer-control input[type="text"], .wpsisac-customizer-control input[type="number"]',function(){field_timeout=a(this).attr("data-timeout"),timeOut="undefined"!=typeof field_timeout?field_timeout:timeOut_Val,wpsisac_generate_shortcode_preview()}),a(document).on("change",".wpsisac-cust-shrt-switcher",function(){redirect=a(this).find(":selected").attr("data-url"),"undefined"!=typeof redirect&&""!=redirect&&(window.location=redirect)}),jQuery("#wpsisac-customizer-shrt-form").submit(function(e){var s=a(this).attr("target");if(void 0===s||""==s)return!1}),a(document).on("click",".wpsisac-cust-shrt-generate",function(){var e=a.trim(a(".wpsisac-customizer-shrt").val()),s=e.substr(0,1),i=e.substr(-1);if(""==e)return!1;"["==s&&"]"==i&&(s=(e=a.trim(e.slice(1,-1))).substr(0,1),i=e.substr(-1)),"["!=s&&(e="["+e),"]"!=i&&(e+="]"),a(".wpsisac-customizer-shrt").val(e),temp_shrt_val=a.trim(e.slice(1,-1));var t=wp.shortcode.attrs(temp_shrt_val);if(t.numeric[0]&&t.numeric[0]!==preview_shortcode)return alert(Wpsisac_Shrt_Mapper.shortocde_err),!1;t.named&&a.each(t.named,function(e,s){e&&a(".wpsisac-customizer-control .wpsisac-"+e).val(s).trigger("change").trigger("keyup")})}),dependency?a.each(dependency,function(e,s){e&&(setTimeout(function(){a(dep_wrap+" .wpsisac-"+e).trigger("change")},10),a(document).on("change keyup",dep_wrap+" .wpsisac-"+e,function(){var c=a(this).val();s.show&&a.each(s.show,function(e,s){a(dep_wrap+" .wpsisac-"+e).closest(".wpsisac-customizer-row").hide(),a(dep_wrap+" .wpsisac-"+e).addClass("wpsisac-cust-hidden-field"),-1!==a.inArray(c,s)&&(a(dep_wrap+" .wpsisac-"+e).closest(".wpsisac-customizer-row").show(),a(dep_wrap+" .wpsisac-"+e).removeClass("wpsisac-cust-hidden-field")),wpsisac_check_ref_dependency(e)}),s.hide&&a.each(s.hide,function(i,e){if(a(dep_wrap+" .wpsisac-"+i).closest(".wpsisac-customizer-row").show(),a(dep_wrap+" .wpsisac-"+i).removeClass("wpsisac-cust-hidden-field"),-1!==a.inArray(c,e)&&(a(dep_wrap+" .wpsisac-"+i).closest(".wpsisac-customizer-row").hide(),a(dep_wrap+" .wpsisac-"+i).addClass("wpsisac-cust-hidden-field")),ref_dep=i in dependency,ref_dep){var t=a(dep_wrap+" .wpsisac-"+i).val();a.each(dependency[i].hide,function(e,s){a(dep_wrap+" .wpsisac-"+e).closest(".wpsisac-customizer-row").hide(),a(dep_wrap+" .wpsisac-"+e).addClass("wpsisac-cust-hidden-field"),-1!=a.inArray(t,s)||a(dep_wrap+" .wpsisac-"+i).hasClass("wpsisac-cust-hidden-field")||(a(dep_wrap+" .wpsisac-"+e).closest(".wpsisac-customizer-row").show(),a(dep_wrap+" .wpsisac-"+e).removeClass("wpsisac-cust-hidden-field"))})}})}))}):wpsisac_generate_shortcode_preview()});